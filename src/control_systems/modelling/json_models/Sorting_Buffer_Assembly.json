{
    "places": {
        "P0": [
            [
                [],
                []
            ],
            "Item recieved from production line"
        ],
        "P1": [
            [
                ["CS_AL1_PLUS"],
                ["SB_AL1", "AL1_LID", "AL1_BASE", "PUWS_AL1_1_PLUS", "PUWS_AL1_1_RT"]
            ],
            "Conveyor scale free"
        ],
        "P2": [
            [
                ["CS_AL1_PLUS"],
                ["SB_AL1", "PUWS_AL1_1_PLUS", "PUWS_AL1_1_RT"]
            ],
            "Item at conveyor scale"
        ],
        "P3": [
            [
                ["SB_AL1"],
                ["CS_AL1_PLUS", "PUWS_AL1_1_PLUS", "PUWS_AL1_1_RT"]
            ],
            "Weighting in progress"
        ],
        "P4": [
            [
                ["SB_AL1"],
                ["CS_AL1_PLUS", "PUWS_AL1_1_PLUS", "PUWS_AL1_1_RT"]
            ],
            "Evaluate weight"
        ],
        "PB": [
            [
                ["SB_AL1", "PUWS_AL1_1_PLUS", "CS_AL1_PLUS"],
                ["PUWS_AL1_1_RT"]
            ],
            "Invalid item, pass to bin"
        ],
        "BIN1": [
            [
                [],
                []
            ],
            "Bin standby"
        ],
        "BIN2": [
            [
                [],
                []
            ],
            "Item on bin line"
        ],
        "P5": [
            [
                ["SB_AL1", "AL1_LID", "PUWS_AL1_1_PLUS", "PUWS_AL1_1_RT", "CS_AL1_PLUS"],
                ["AL1_BASE"]
            ],
            "Scale detects a lid"
        ],
        "P6": [
            [
                ["SB_AL1", "AL1_BASE", "PUWS_AL1_1_PLUS", "PUWS_AL1_1_RT", "CS_AL1_PLUS"],
                ["AL1_LID"]
            ],
            "Scale detects a base"
        ],


        "P_BASE": [
            [
                [],
                ["P_AL1_B"]
            ],
            "Incoming item is a base"
        ],
        "PB1": [
            [
                [],
                ["P_AL1_B"]
            ],
            "Waiting for item to get within pusher range"
        ],
        "PUSH_B": [
            [
                [],
                []
            ],
            "Base pusher free"
        ],
        "PB2": [
            [
                ["P_AL1_B"],
                []
            ],
            "Push base"
        ],
        "PB23": [
            [
                ["P_AL1_B"],
                []
            ],
            "Pushing base"
        ],
        "PB3": [
            [
                [],
                ["P_AL1_B"]
            ],
            "Retracting base pusher"
        ],
        "PB4": [
            [
                [],
                []
            ],
            "Item on base line"
        ],
        "PBF1": [
            [
                [],
                ["SB_AL1_B1"]
            ],
            "Base buffer 1 free"
        ],
        "PB5": [
            [
                ["SB_AL1_B1"],
                []
            ],
            "Stop blade base 1 up"
        ],
        "PBF2": [
            [
                [],
                ["SB_AL1_B2"]
            ],
            "Base buffer 2 free"
        ],
        "PB6": [
            [
                ["SB_AL1_B2"],
                []
            ],
            "Stop blade base 2 up"
        ],
        "PBF3": [
            [
                [],
                ["SB_AL1_B3"]
            ],
            "Base buffer 3 free"
        ],
        "PB7": [
            [
                ["SB_AL1_B3"],
                []
            ],
            "Stop blade base 3 up"
        ],
        "PB78": [
            [
                ["SB_AL1_B3"],
                []
            ],
            "Waiting for base to get within clamping range"
        ],


        "P_LID": [
            [
                [],
                ["P_AL1_L"]
            ],
            "Incoming item is a lid"
        ],
        "PL1": [
            [
                [],
                ["P_AL1_L"]
            ],
            "Waiting for item to get within pusher range"
        ],
        "PUSH_L": [
            [
                [],
                []
            ],
            "Lid pusher free"
        ],
        "PL2": [
            [
                ["P_AL1_L"],
                []
            ],
            "Push lid"
        ],
        "PL23": [
            [
                ["P_AL1_L"],
                []
            ],
            "Pushing lid"
        ],
        "PL3": [
            [
                [],
                ["P_AL1_L"]
            ],
            "Retracting lid pusher"
        ],
        "PL4": [
            [
                [],
                []
            ],
            "Item on lid line"
        ],
        "PLF1": [
            [
                [],
                ["SB_AL1_L1"]
            ],
            "Lid buffer 1 free"
        ],
        "PL5": [
            [
                ["SB_AL1_L1"],
                []
            ],
            "Stop blade lid 1 up"
        ],
        "PLF2": [
            [
                [],
                ["SB_AL1_L2"]
            ],
            "Lid buffer 2 free"
        ],
        "PL6": [
            [
                ["SB_AL1_L2"],
                []
            ],
            "Stop blade lid 2 up"
        ],
        "PLF3": [
            [
                [],
            [   "SB_AL1_L3"]
            ],
            "Lid buffer 3 free"
        ],
        "PL7": [
            [
                ["SB_AL1_L3"],
                []
            ],
            "Stop blade lid 3 up"
        ],
        "PL78": [
            [
                ["SB_AL1_L3"],
                []
            ],
            "Waiting for lid to get into clamping range"
        ],
        

        "PA0": [
            [
                [],
                ["LP_AL1_RAISE", "AL1_GRAB"]
            ],
            ["AL1_X_SET:=210", "AL1_Y_SET:=150", "AL1_Z_SET:=400"],
            "Assembler free"
        ],
        "PA1": [
            [
                [],
                ["AL1_GRAB", "LP_AL1_RAISE"]
            ],
            ["AL1_X_SET:=800", "AL1_Y_SET:=150"],
            "Request grabber movement to lid position"
        ],
        "PA2": [
            [
                [],
                ["AL1_GRAB", "LP_AL1_RAISE"]
            ],
            ["AL1_Z_SET:=800"],
            "Grabber at lid position. Lower grabber to pick lid"
        ],
        "PA3": [
            [
                ["AL1_GRAB"],
                ["RP_AL1_CLAMP", "LP_AL1_RAISE"]
            ],
            "Pick up lid and release lid clamp"
        ],
        "PA4": [
            [
                ["AL1_GRAB"],
                ["RP_AL1_CLAMP", "LP_AL1_RAISE"]
            ],
            ["AL1_Z_SET:=400"],
            "Raise grabber up a little"
        ],
        "PA5": [
            [
                ["AL1_GRAB"],
                ["LP_AL1_RAISE"]
            ],
            ["AL1_X_SET:=210", "AL1_Y_SET:=150"],
            "Move grabber to base position for fitting"
        ],
        "PA6": [
            [
                ["AL1_GRAB", "LP_AL1_CLAMP"],
                ["LP_AL1_RAISE"]
            ],
            ["AL1_Z_SET:=818"],
            "Fit lid on base"
        ],
        "PA7": [
            [
                ["LP_AL1_CLAMP"],
                ["AL1_GRAB", "LP_AL1_RAISE"]
            ],
            ["AL1_Z_SET:=400"],
            "Release lid and raise grabber back up"
        ],
        "PA8": [
            [
                [],
                ["AL1_GRAB", "LP_AL1_CLAMP", "LP_AL1_RAISE"]
            ],
            "Release base clamp"
        ],
        "PA9": [
            [
                ["LP_AL1_RAISE"],
                ["LP_AL1_CLAMP"]
            ],
            "Raise base clamp so that assembled product can pass"
        ],
        "PA10": [
            [
                ["LP_AL1_RAISE"],
                ["LP_AL1_CLAMP"]
            ],
            "Base clamp going up"
        ],
        "PA11": [
            [
                [],
                ["LP_AL1_CLAMP", "LP_AL1_RAISE"]
            ],
            "Put clamp back down"
        ],
        "PA12": [
            [
                [],
                ["LP_AL1_CLAMP","LP_AL1_RAISE"]
            ],
            "Base clamp going back down"
        ],
        "PA13": [
            [
                [],
                []
            ],
            "Assembled product out"
        ],
        "PBF4": [
            [
                [],
                ["LP_AL1_CLAMP"]
            ],
            "Base clamp free"
        ],
        "PB8": [
            [
                ["LP_AL1_CLAMP"],
                []
            ],
            "Base clamping in progress"
        ],
        "PB9": [
            [
                ["LP_AL1_CLAMP"],
                []
            ],
            "Base clamped"
        ],
        "PLF4": [
            [
                [],
                ["RP_AL1_CLAMP"]
            ],
            "Lid clamp free"
        ],
        "PL8": [
            [
                ["RP_AL1_CLAMP"],
                []
            ],
            "Lid clamping in progress"
        ],
        "PL9": [
            [
                ["RP_AL1_CLAMP"],
                []
            ],
            "Lid clamped"
        ],


        "PSA0": [
            [
                [], ["PAS_AL1_ST_TURN"]
            ],
            "Pivot arm sorter inactive"
        ],
        "PSA1": [
            [
                ["PAS_AL1_ST_TURN"], []
            ],
            "Pivot arm sorter inactive"
        ],

        "initial": [
            "P0", "P1", "BIN1", 

            "PUSH_B", "PBF1", "PBF2", "PBF3", "PBF4",

            "PUSH_L", "PLF1", "PLF2", "PLF3", "PLF4",
            
            "PA0",

            "PSA0"
        ]
    },

    "outputs": {
        "SB_AL1": ["%QX101.2"],
        "PUWS_AL1_1_PLUS": ["%QX101.3"],
        "PUWS_AL1_1_RT": ["%QX101.4"],
        "CS_AL1_PLUS": ["%QX101.5"],


        "P_AL1_B": ["%QX100.0"],
        "SB_AL1_B1": ["%QX100.1"],
        "SB_AL1_B2": ["%QX100.2"],
        "SB_AL1_B3": ["%QX100.3"],
        "LP_AL1_CLAMP": ["%QX100.4"],


        "P_AL1_L": ["%QX100.5"],
        "SB_AL1_L1": ["%QX100.6"],
        "SB_AL1_L2": ["%QX100.7"],
        "SB_AL1_L3": ["%QX101.0"],
        "RP_AL1_CLAMP": ["%QX101.1"],


        "AL1_GRAB": ["%QX101.6"],
        "LP_AL1_RAISE": ["%QX101.7"],
        "AL1_X_SET": ["%QW100", "WORD"],
        "AL1_Y_SET": ["%QW101", "WORD"],
        "AL1_Z_SET": ["%QW102", "WORD"],


        "PAS_AL1_ST_TURN": ["%QX103.5"]
    },

    "transitions": {
        "T0212": [
            ["P1"],
            [
                [
                    ["S_AL1"], []
                ]
            ],
            ["P2"],
            "Item arriving at conveyor scale"
        ],
        "T23": [
            ["P2"],
            [
                [
                    ["timer_1_P2.Q"], []
                ]
            ],
            ["P3"],
            "Item fully on scale"
        ],
        "T34": [
            ["P3"],
            [
                [
                    ["timer_1_P3.Q"], []
                ]
            ],
            ["P4"],
            "Stop conveyor belt to allow accurate weight measurement"
        ],
        "T4B": [
            ["P4"],
            [
                ["(CS_AL1_W < 200) | (CS_AL1_W > 400)"]
            ],
            ["PB"],
            "Invalid item (weights less than 4kg or more than 8kg)"
        ],
        "T4B2": [
            ["PB", "BIN1"],
            [
                [
                    ["S_BIN_1"], []
                ]
            ],
            ["BIN2", "P1"],
            "Item arriving at bin line"
        ],
        "TB21": [
            ["BIN2"],
            [
                [
                    [], ["S_BIN_1"]
                ]
            ],
            ["BIN1"],
            "Item being transported to bin"
        ],
        "T45": [
            ["P4"],
            [
                ["(CS_AL1_W > 200) & (CS_AL1_W <= 300)"]
            ],
            ["P5"],
            "Item is lid"
        ],
        "T46": [
            ["P4"],
            [
                ["(CS_AL1_W > 300) & (CS_AL1_W <= 400)"]
            ],
            ["P6"]
        ],
        "T57": [
            ["P5"],
            [
                [
                    ["S_AL1_BL"], []
                ]
            ],
            ["P_LID", "P1"],
            "Item arriving at buffer"
        ],
        "T67": [
            ["P6"],
            [
                [
                    ["S_AL1_BL"], []
                ]
            ],
            ["P_BASE", "P1"],
            "Item arriving at buffer"
        ],
        

        "TB0": [
            ["P_BASE"],
            [
                [
                    ["S_AL1_B"], []
                ]
            ],
            ["PB1"],
            "Incoming item detected"
        ],
        "TB1": [
            ["PB1", "PUSH_B"],
            [
                [
                    ["timer_1_TB1.Q"], []
                ]
            ],
            ["PB2"],
            "Pusher waiting time reached"
        ],
        "TB23": [
            ["PB2"],
            [
                [
                    ["P_AL1_B_FT"], []
                ]
            ],
            ["PB23"],
            "Base pusher extending"
        ],
        "TB2": [
            ["PB23"],
            [
                [
                    ["P_AL1_B_FT"], []
                ]
            ],
            ["PB3"],
            "Base pusher fully extended"
        ],
        "TB3": [
            ["PB3"],
            [
                [
                    ["P_AL1_B_BK"], []
                ]
            ],
            ["PB4", "PUSH_B"],
            "Base pusher fully retracted"
        ],
        "TB4": [
            ["PB4", "PBF1"],
            [
                [
                    ["S_AL1_B1"], []
                ]
            ],
            ["PB5"]
        ],
        "TB5": [
            ["PB5", "PBF2"],
            [
                [
                    ["S_AL1_B2"], []
                ]
            ],
            ["PB6", "PBF1"]
        ],
        "TB6": [
            ["PB6", "PBF3"],
            [
                [
                    ["S_AL1_B3"], []
                ]
            ],
            ["PB7", "PBF2"]
        ],
        "TB7": [
            ["PB7", "PBF4"],
            [
                [
                    ["S_AL1_LP"], []
                ]
            ],
            ["PB78"]
        ],
        "TB78": [
            ["PB78"],
            [
                [
                    ["timer_1_PB7.Q"], []
                ]
            ],
            ["PB8"]
        ],


        "TL0": [
            ["P_LID"],
            [
                [
                    ["S_AL1_L"], []
                ]
            ],
            ["PL1"],
            "Incoming item detected"
        ],
        "TL1": [
            ["PL1", "PUSH_L"],
            [
                [
                    ["timer_1_TL1.Q"], []
                ]
            ],
            ["PL2"],
            "Pusher waiting time reached"
        ],
        "TL23": [
            ["PL2"],
            [
                [
                    ["P_AL1_L_FT"], []
                ]
            ],
            ["PL23"],
            "Lid pusher extending"
        ],
        "TL2": [
            ["PL23"],
            [
                [
                    ["P_AL1_L_FT"], []
                ]
            ],
            ["PL3"],
            "Lid pusher fully extended"
        ],
        "TL3": [
            ["PL3"],
            [
                [
                    ["P_AL1_L_BK"], []
                ]
            ],
            ["PL4", "PUSH_L"],
            "Lid pusher fully retracted"
        ],
        "TL4": [
            ["PL4", "PLF1"],
            [
                [
                    ["S_AL1_L1"], []
                ]
            ],
            ["PL5"]
        ],
        "TL5": [
            ["PL5", "PLF2"],
            [
                [
                    ["S_AL1_L2"], []
                ]
            ],
            ["PL6", "PLF1"]
        ],
        "TL6": [
            ["PL6", "PLF3"],
            [
                [
                    ["S_AL1_L3"], []
                ]
            ],
            ["PL7", "PLF2"]
        ],
        "TL7": [
            ["PL7", "PLF4"],
            [
                [
                    ["S_AL1_RP"], []
                ]
            ],
            ["PL78"]
        ],
        "TL78": [
            ["PL78"],
            [
                [
                    ["timer_1_PL7.Q"], []
                ]
            ],
            ["PL8"]
        ],



        "TL8": [
            ["PL8"],
            [
                [
                    ["RP_AL1_CLAMPED"], []
                ]
            ],
            ["PL9"]
        ],
        "TB8": [
            ["PB8"],
            [
                [
                    ["LP_AL1_CLAMPED"], []
                ]
            ],
            ["PB9"]
        ],
        "TA0": [
            ["PL9", "PA0"],
            [
                [
                    ["timer_1_PL9.Q", "RP_AL1_CLAMPED"], ["AL1_DETECTED"]
                ]
            ],
            ["PA1"]
        ],
        "TA1": [
            ["PA1"],
            [
                [
                    "AL1_X_POS>798 & AL1_X_POS<802"
                ]
            ],
            ["PA2"],
            "Grabber arrives at lid position"
        ],
        "TA2": [
            ["PA2"],
            [
                [
                    "AL1_Z_POS>798 & AL1_Z_POS<802"
                ]
            ],
            ["PA3"],
            ""
        ],
        "TA3": [
            ["PA3"],
            [
                [
                    [], ["RP_AL1_CLAMPED"]
                ]
            ],
            ["PA4"]
        ],
        "TA4": [
            ["PA4"],
            [
                [
                    "AL1_Z_POS>398 & AL1_Z_POS<402"
                ]
            ],
            ["PA5", "PLF3", "PLF4"]
        ],
        "TA5": [
            ["PB9", "PA5"],
            [
                [
                    "AL1_DETECTED & LP_AL1_CLAMPED & AL1_X_POS>208 & AL1_X_POS<212"
                ]
            ],
            ["PA6"]
        ],
       "TA6": [
           ["PA6"],
           [
               [
                   "AL1_Z_POS>810 & AL1_Z_POS<820"
               ]
           ],
           ["PA7"]
       ],
       "TA7": [
           ["PA7"],
           [
               [
                   "AL1_Z_POS>398 & AL1_Z_POS<402"
               ]
           ],
           ["PA8"]
       ], 
       "TA8": [
           ["PA8"],
           [
               [
                   [], ["LP_AL1_CLAMPED"]
               ]
           ],
           ["PA9"]
       ],
       "TA9": [
           ["PA9"],
           [
               [
                   [], ["LP_AL1_LIMIT"]
               ]
           ],
           ["PA10"]
       ],
       "TA10": [
           ["PA10"],
           [
               [
                   ["LP_AL1_LIMIT"], []
               ]
           ],
           ["PA11"]
       ],
       "TA11": [
            ["PA11"],
            [
                [
                    [], ["LP_AL1_LIMIT"]
                ]
            ],
            ["PA12"]
        ],
        "TA12": [
            ["PA12"],
            [
                [
                    ["LP_AL1_LIMIT"], []
                ]
            ],
            ["PA13", "PA0", "PBF3", "PBF4"]
        ],

        "TSA0": [
            ["PA13", "PSA0"],
            [
                [
                    ["ST_AL1_ST0"], []
                ]
            ],
            ["PSA1"]
        ],
        "TSA1": [
            ["PSA1"],
            [
                [
                    ["timer_1_PSA1.Q"], []
                ]
            ],
            ["PSA0"]
        ],

       "TS1": [
           ["PA13"],
           [
               [
                   ["TRUE"],[]
               ]
           ],
           []
       ] 

    },

    "internals": {
        "timer_1_TL1": [
            [
                "MODULE",
                {
                    "Q": "boolean"
                }
            ],
            [
                "TON",
                "timer_1_TL1(IN:= PL1, PT:= T#750ms)"
            ]
        ],
        "timer_1_TB1": [
            [
                "MODULE",
                {
                    "Q": "boolean"
                }
            ],
            [
                "TON",
                "timer_1_TB1(IN:= PB1, PT:= T#900ms)"
            ]
        ],
        "timer_1_P2": [
            [
                "MODULE",
                {
                    "Q": "boolean"
                }
            ],
            [
                "TON",
                "timer_1_P2(IN:= P2, PT:= T#1000ms)"
            ]
        ],
        "timer_1_P3": [
            [
                "MODULE",
                {
                    "Q": "boolean"
                }
            ],
            [
                "TON",
                "timer_1_P3(IN:= P3, PT:= T#1000ms)"
            ]
        ],
        "AL1_BASE":[
            [
                "boolean",
                "{TRUE, FALSE}",
                "{TRUE, FALSE}"
            ],
            [
                "BOOL",
                ""
            ]
        ],
        "AL1_LID": [
            [
                "boolean",
                "{TRUE, FALSE}",
                "{TRUE, FALSE}"
            ],
            [
                "BOOL",
                ""
            ]
        ],
        "timer_1_PL9": [
            [
                "MODULE",
                {
                    "Q": "boolean"
                }
            ],
            [
                "TON",
                "timer_1_PL9(IN:= PL9, PT:= T#300ms)"
            ]
        ],
        "timer_1_PL7": [
            [
                "MODULE",
                {
                    "Q": "boolean"
                }
            ],
            [
                "TON",
                "timer_1_PL7(IN:= PL78, PT:= T#1500ms)"
            ]
        ],
        "timer_1_PB7": [
            [
                "MODULE",
                {
                    "Q": "boolean"
                }
            ],
            [
                "TON",
                "timer_1_PB7(IN:= PB78, PT:= T#1500ms)"
            ]
        ],


        "timer_1_PSA1": [
            [
                "MODULE",
                {
                    "Q": "boolean"
                }
            ],
            [
                "TON",
                "timer_1_PSA1(IN:= PSA1, PT:= T#5000ms)"
            ]
        ]

    },

    "inputs": {
        "S_AL1_B": ["boolean", "%IX100.0"],
        "P_AL1_B_FT": ["boolean", "%IX100.1"],
        "P_AL1_B_BK": ["boolean", "%IX100.2"],
        "S_AL1_B1": ["boolean", "%IX100.3"],
        "S_AL1_B2": ["boolean", "%IX100.4"],
        "S_AL1_B3": ["boolean", "%IX100.5"],
        "LP_AL1_CLAMPED": ["boolean", "%IX100.6"],
        "S_AL1_LP": ["boolean", "%IX100.7"],


        "S_AL1_L": ["boolean", "%IX101.0"],
        "P_AL1_L_FT": ["boolean", "%IX101.1"],
        "P_AL1_L_BK": ["boolean", "%IX101.2"],
        "S_AL1_L1": ["boolean", "%IX101.3"],
        "S_AL1_L2": ["boolean", "%IX101.4"],
        "S_AL1_L3": ["boolean", "%IX101.5"],
        "RP_AL1_CLAMPED": ["boolean", "%IX101.6"],
        "S_AL1_RP": ["boolean", "%IX101.7"],


        "S_AL1": ["boolean", "%IX102.0"],
        "CS_AL1_W": [
            [
                "{0, 100, 300, 400, 500, 900}",
                0,
                "{0, 100, 300, 400, 500, 900}"
            ],
            "%IW100"
        ],
        "S_BIN_1": ["boolean", "%IX102.1"],
        "S_AL1_BL": ["boolean", "%IX102.2"],


        "AL1_DETECTED": ["boolean", "%IX102.3"],
        "LP_AL1_LIMIT": ["boolean", "%IX102.4"],
        "AL1_X_POS":  [
            [
                "{0, 210, 700, 800, 900}",
                0,
                "{0, 210, 700, 800, 900}"
            ],
            "%IW101"
        ],
        "AL1_Y_POS":  [
            [
                "{0, 150, 300}",
                0,
                "{0, 150, 300}"
            ],
            "%IW102"
        ],
        "AL1_Z_POS":  [
            [
                "{0, 100, 400, 800, 900}",
                0,
                "{0, 100, 400, 800, 900}"
            ],
            "%IW103"
        ],

        "ST_AL1_ST0": ["boolean", "%IX105.3"]
        
    },

    "specifications": {
        "auto": true,
        "manual": [
            "AG( stab -> EF(PA13) )"
        ]
    }

}